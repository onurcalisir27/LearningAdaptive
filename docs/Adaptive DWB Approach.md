## What is DWB

[[DWB Controller]] (Dynamic Window Based) is the successor to the base local planner and DWA (Dynamic Window Approach) controllers. It is a critic-based controller algorithm

DWB has improved upon DWA in few major ways:
- It implements plugin-based critics to allow users to specify new critic functions to use in the system. They can be dynamically reconfigured, reweighed, and tuned to gain very particular behavior in the robot system.
- It implements plugin based trajectory generation techniques, so that users can generate trajectories any number of ways and for any number of types of vehicles
It is possible to tune DWB to gain both DWA and base local planner behaviors, as well as expansions using new plugins for use-case specific behaviors. 

## DWB Plugins

There are three types of plugins used, for each of them a few implementations are available, *but you can create custom ones if you need.*

#### Trajectory Generator Plugins

These plugins generate the set of possible trajectories that should be evaluated by the critics. **The trajectory with the best score determines the output command velocity**.

There are two trajectory generators provided with Nav2, only one can be loaded at a time.
- StandardTrajectoryGenerator: Trajectory rollout algorithm
- LimitedAccelGenerator: similar to DWA

#### Critic Plugins

These are used to score the trajectories generated by the trajectory generator. 

Multiple plugins can be loaded and the sum of their scores determines the chosen command velocity.

- Base Obstacle: Scores a trajectory based on where the path passes over the costmap. To use properly, must use the inflation layer in costmap to expand obstacles by the robot's radius
- Obstacle Footprint: Scores a trajectory based on verifying all points along the robot's footprint don't touch an obstacle marked in the costmap
- GoalAlign: Scores a trajectory based on how well aligned the trajectory is with the goal pose
- GoalDist: Scores a trajectory based on how close the trajectory gets the robot to the goal pose
- PathAlign: Scores a trajectory based on how well its aligned to the path provided by the global planner
- PathDist: Scores a trajectory based on how far it ends up from the path provided by the global planner
- Prefer Forward: Scores trajectories that move the robot forward more highly
- RotateToGoal: Only allows the robot to rotate to the goal orientation when it is sufficiently close to the goal
- Oscillation: Prevents the robot form just oscillating in place
- Twirling: Prevents holonomic robots from spinning as they make their way to the goal